# Project Context

This file is auto-generated by Puffin to provide context to Claude Code.

## Project Overview

**Project:** puffin

Puffin is an Electron-based GUI application that serves as a **management layer** on top of the Claude Code CLI (3CLI). Its primary purpose is to:

1. **Track and organize** 3CLI outputs and conversations
2. **Provide context** to 3CLI through project configuration and history
3. **Visualize** the development process (prompts, responses, branches)
4. **Communicate UI designs** via the GUI designer

**Important**: 3CLI remains in control of building the project. Puffin is an orchestration and tracking tool, not a replacement for the CLI's capabilities.

## Coding Preferences

- **Programming Style:** Hybrid (OOP + FP)
- **Testing Approach:** Behavior-Driven Development
- **Documentation Level:** Standard
- **Error Handling:** Exceptions
- **Naming Convention:** camelCase
- **Comment Style:** JSDoc

## Active User Stories

### ðŸ“‹ Multi-Hop Handoff Chaining

As a user, I want to chain multiple handoff summaries together so that context is preserved across multiple handoff sequences

**Acceptance Criteria:**
- When creating a new handoff from a thread that received a handoff, both summaries are linked
- Chained handoff summaries are presented in chronological order
- The receiving thread can access the full chain of handoff context
- User can view the complete handoff chain history
- Each hop in the chain is clearly identified with its source thread

### ðŸ”„ Sprint Planning Phase with Plan Button

As a user, I want a 'Plan' button available in the sprint view so that I can initiate the planning phase for the selected user stories

**Acceptance Criteria:**
- A 'Plan' button is visible when a sprint is first created
- Clicking 'Plan' triggers a planning prompt to Claude
- The planning request includes context from all selected user stories
- The sprint status changes to 'Planning' while plan is being generated
- User can see the generated plan in the prompt conversation

### ðŸ”„ Sprint Plan Review and Modification

As a user, I want to review and modify the generated plan through follow-up prompts so that I can refine the implementation approach before starting work

**Acceptance Criteria:**
- User can send follow-up prompts to refine the plan
- Plan modifications are tracked in the conversation history
- User can explicitly approve the plan when satisfied
- Sprint status updates to 'Ready for Implementation' after plan approval
- The final approved plan is associated with the sprint

### ðŸ“‹ Implementation Branch Buttons per User Story

As a user, I want to see implementation branch buttons below each user story header so that I can start focused implementation work on specific areas

**Acceptance Criteria:**
- Each user story header displays branch buttons (UI, Backend, etc.)
- Branch buttons appear after the sprint plan is approved
- Buttons are contextually relevant to the type of work in the story
- Branch buttons are visually associated with their parent user story
- User can identify which story each branch button belongs to

### ðŸ“‹ Start Implementation from Branch Button

As a user, I want to click a branch button to start implementation so that a new turn is added to the current sprint thread with the appropriate context

**Acceptance Criteria:**
- Clicking a branch button adds a new turn to the sprint thread
- The new turn includes context about which story and branch was selected
- The implementation prompt references the approved plan
- The branch type (UI, Backend, etc.) is passed to Claude for context
- The sprint thread continues in the same window

### ðŸ”„ Sprint State Persistence

As a user, I want the sprint state to persist so that I can return to a sprint and continue work where I left off

**Acceptance Criteria:**
- Sprint data is saved including selected stories, plan, and status
- Reopening a sprint restores the header display with user stories
- Implementation progress per branch is tracked and displayed
- Sprint thread conversation history is preserved
- User can see which branches have been started or completed

### ðŸ“‹ Sprint Progress Tracking per Story

As a user, I want to see the implementation progress for each user story within the sprint so that I know what work remains

**Acceptance Criteria:**
- Each user story header shows implementation status
- Branch buttons indicate whether they have been started
- Completed branches are visually marked as done
- Overall sprint progress is visible
- User can identify blocked or incomplete work at a glance

### ðŸ“‹ Existing Prompt View Compatibility

As a user, I want the existing prompt view to continue working as before so that I can still use free-form prompting without creating a sprint

**Acceptance Criteria:**
- Standard prompt threads work without sprint headers
- User can create new threads without selecting user stories
- Existing prompt functionality is unchanged
- Sprint mode is opt-in through the Backlog selection workflow
- User can distinguish between sprint threads and regular threads
