# Project Context

This file is auto-generated by Puffin to provide context to Claude Code.

## Project Overview

**Project:** puffin

Puffin is an Electron-based GUI application that serves as a **management layer** on top of the Claude Code CLI (3CLI). Its primary purpose is to:

1. **Track and organize** 3CLI outputs and conversations
2. **Provide context** to 3CLI through project configuration and history
3. **Visualize** the development process (prompts, responses, branches)
4. **Communicate UI designs** via the GUI designer

**Important**: 3CLI remains in control of building the project. Puffin is an orchestration and tracking tool, not a replacement for the CLI's capabilities.

## Coding Preferences

- **Programming Style:** Hybrid (OOP + FP)
- **Testing Approach:** Behavior-Driven Development
- **Documentation Level:** Standard
- **Error Handling:** Exceptions
- **Naming Convention:** camelCase
- **Comment Style:** JSDoc

## Active User Stories

### ðŸ”„ Merge Feature Branch to Main

As a user, I want to merge my feature branch into the main branch so that my completed work is integrated into the primary codebase

**Acceptance Criteria:**
- User can select the target branch to merge into (defaults to main/master)
- Puffin performs a merge operation from the current branch to the target branch
- User is warned if there are uncommitted changes before merging
- Successful merge displays a confirmation message
- Merge conflicts are detected and reported to the user with affected files listed
- User is given guidance on resolving merge conflicts outside Puffin

### ðŸ”„ Post-Merge Branch Workflow

As a user, I want Puffin to help me prepare for the next feature after a successful merge so that I can maintain a clean workflow

**Acceptance Criteria:**
- After a successful merge, user is prompted to create a new feature branch
- User can optionally delete the merged feature branch
- User can choose to stay on the main branch or switch to a new branch
- The workflow is optional and can be skipped

### ðŸ”„ Merge Feature Branch to Main

As a user, I want to merge my feature branch into the main branch so that my completed work is integrated into the primary codebase

**Acceptance Criteria:**
- User can select the target branch to merge into (defaults to main/master)
- Puffin performs a merge operation from the current branch to the target branch
- User is warned if there are uncommitted changes before merging
- Successful merge displays a confirmation message
- Merge conflicts are detected and reported to the user with affected files listed
- User is given guidance on resolving merge conflicts outside Puffin

### ðŸ”„ Post-Merge Branch Workflow

As a user, I want Puffin to help me prepare for the next feature after a successful merge so that I can maintain a clean workflow

**Acceptance Criteria:**
- After a successful merge, user is prompted to create a new feature branch
- User can optionally delete the merged feature branch
- User can choose to stay on the main branch or switch to a new branch
- The workflow is optional and can be skipped

### ðŸ”„ Handoff Persistence Without Expiration

As a user, I want handoffs to persist indefinitely until I explicitly delete them so that I don't lose context due to automatic expiration

**Acceptance Criteria:**
- Handoffs remain available until manually deleted by the user
- User can delete a handoff through a clear UI action
- Deleted handoffs are permanently removed from storage
- Confirmation dialog appears before deleting a handoff

### ðŸ”„ Handoff Summary Updates

As a user, I want handoff summaries to be updated as I refine my work so that code changes and bug fixes are reflected in the handoff context

**Acceptance Criteria:**
- Handoff summaries are automatically updated when relevant code changes occur
- User can manually trigger a handoff summary refresh
- The current summary always reflects the latest state of the work

### ðŸ“‹ Multi-Hop Handoff Chaining

As a user, I want to chain multiple handoff summaries together so that context is preserved across multiple handoff sequences

**Acceptance Criteria:**
- When creating a new handoff from a thread that received a handoff, both summaries are linked
- Chained handoff summaries are presented in chronological order
- The receiving thread can access the full chain of handoff context
- User can view the complete handoff chain history
- Each hop in the chain is clearly identified with its source thread

### ðŸ”„ Handoff Ready Button in Prompt Area

As a user, I want a 'Handoff Ready' button to appear below the prompt input so that I can initiate a handoff when I decide the work is ready

**Acceptance Criteria:**
- A 'Handoff Ready' button appears below the prompt input area
- The button is always accessible regardless of Claude's assessment of completion
- The button is visually distinct and easy to identify
- Clicking the button opens the handoff review modal

### ðŸ”„ Handoff Review Modal

As a user, I want to review the handoff summary in a modal before completing the handoff so that I can verify the context being passed to the new thread

**Acceptance Criteria:**
- Modal displays the current handoff summary content
- User can read and review all context that will be handed off
- Modal includes a 'Hand Off to New Thread' action button
- Modal includes a 'Cancel' option to return without handing off
- User can continue working and refining before completing the handoff

### ðŸ”„ User-Controlled Handoff Timing

As a user, I want to control when a handoff occurs regardless of Claude's completion assessment so that I can fix bugs and refine features before handing off

**Acceptance Criteria:**
- Handoff initiation is entirely user-driven
- User can continue making changes after a handoff summary is generated
- Changes made after summary generation trigger summary updates
- User decides when the work is ready to hand off, not the system

---

## Branch Focus: Backend

You are working on the **backend thread**. Focus on:
- API design and implementation
- Data persistence and database operations
- Business logic and validation
- Error handling and logging
- Security and authentication
