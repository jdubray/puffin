# Project Context

This file is auto-generated by Puffin to provide context to Claude Code.

## Project Overview

**Project:** puffin

Puffin is an Electron-based GUI application that serves as a **management layer** on top of the Claude Code CLI (3CLI). Its primary purpose is to:

1. **Track and organize** 3CLI outputs and conversations
2. **Provide context** to 3CLI through project configuration and history
3. **Visualize** the development process (prompts, responses, branches)
4. **Communicate UI designs** via the GUI designer

**Important**: 3CLI remains in control of building the project. Puffin is an orchestration and tracking tool, not a replacement for the CLI's capabilities.

## Coding Preferences

- **Programming Style:** Hybrid (OOP + FP)
- **Testing Approach:** Behavior-Driven Development
- **Documentation Level:** Standard
- **Error Handling:** Exceptions
- **Naming Convention:** camelCase
- **Comment Style:** JSDoc

## Active User Stories

### ðŸ“‹ Multi-Hop Handoff Chaining

As a user, I want to chain multiple handoff summaries together so that context is preserved across multiple handoff sequences

**Acceptance Criteria:**
- When creating a new handoff from a thread that received a handoff, both summaries are linked
- Chained handoff summaries are presented in chronological order
- The receiving thread can access the full chain of handoff context
- User can view the complete handoff chain history
- Each hop in the chain is clearly identified with its source thread

### ðŸ“‹ Implementation Branch Buttons per User Story

As a user, I want to see implementation branch buttons below each user story header so that I can start focused implementation work on specific areas

**Acceptance Criteria:**
- Each user story header displays branch buttons (UI, Backend, etc.)
- Branch buttons appear after the sprint plan is approved
- Buttons are contextually relevant to the type of work in the story
- Branch buttons are visually associated with their parent user story
- User can identify which story each branch button belongs to

### ðŸ“‹ Start Implementation from Branch Button

As a user, I want to click a branch button to start implementation so that a new turn is added to the current sprint thread with the appropriate context

**Acceptance Criteria:**
- Clicking a branch button adds a new turn to the sprint thread
- The new turn includes context about which story and branch was selected
- The implementation prompt references the approved plan
- The branch type (UI, Backend, etc.) is passed to Claude for context
- The sprint thread continues in the same window

### ðŸ“‹ Sprint Progress Tracking per Story

As a user, I want to see the implementation progress for each user story within the sprint so that I know what work remains

**Acceptance Criteria:**
- Each user story header shows implementation status
- Branch buttons indicate whether they have been started
- Completed branches are visually marked as done
- Overall sprint progress is visible
- User can identify blocked or incomplete work at a glance

### ðŸ“‹ Existing Prompt View Compatibility

As a user, I want the existing prompt view to continue working as before so that I can still use free-form prompting without creating a sprint

**Acceptance Criteria:**
- Standard prompt threads work without sprint headers
- User can create new threads without selecting user stories
- Existing prompt functionality is unchanged
- Sprint mode is opt-in through the Backlog selection workflow
- User can distinguish between sprint threads and regular threads

### ðŸ“‹ Default Maximum Iterations Configuration

As a user, I want the system to default to 10 maximum iterations so that sprint execution has a sensible limit without manual configuration

**Acceptance Criteria:**
- New sprints default to 10 maximum iterations
- The default value is applied when no custom value is specified
- The maximum iterations value is visible in sprint configuration
- User can override the default if needed

### ðŸ“‹ Auto-Continue Delay Configuration

As a user, I want a 20 second delay between auto-continues so that I have time to review output before the next iteration begins

**Acceptance Criteria:**
- System waits 20 seconds between automatic continuation prompts
- The delay countdown is visible to the user
- User can manually trigger continuation before delay expires
- User can cancel the auto-continue during the delay period

### ðŸ“‹ Stuck Detection Threshold

As a user, I want the system to detect when execution is stuck after 3 similar iterations so that I am alerted to potential issues

**Acceptance Criteria:**
- System tracks iteration outputs for similarity
- Alert is triggered after 3 consecutive similar iterations
- User is notified when stuck state is detected
- User can choose to continue, modify approach, or stop execution
- Stuck detection resets when output changes significantly

### ðŸ“‹ Sprint Story Limit Enforcement

As a user, I want the system to reject sprints with more than 4 stories so that I avoid exceeding token limits during execution

**Acceptance Criteria:**
- System validates story count when sprint is created
- Sprints with more than 4 stories are rejected
- Clear error message indicates token limit restriction
- User is prompted to reduce story count before proceeding
- Validation occurs before any sprint execution begins

---

## Branch Focus: Backend

You are working on the **backend thread**. Focus on:
- API design and implementation
- Data persistence and database operations
- Business logic and validation
- Error handling and logging
- Security and authentication
