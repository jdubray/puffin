# Project Context

This file is auto-generated by Puffin to provide context to Claude Code.

## Project Overview

**Project:** puffin

Puffin is an Electron-based GUI application that serves as a **management layer** on top of the Claude Code CLI (3CLI). Its primary purpose is to:

1. **Track and organize** 3CLI outputs and conversations
2. **Provide context** to 3CLI through project configuration and history
3. **Visualize** the development process (prompts, responses, branches)
4. **Communicate UI designs** via the GUI designer

**Important**: 3CLI remains in control of building the project. Puffin is an orchestration and tracking tool, not a replacement for the CLI's capabilities.

## Coding Preferences

- **Programming Style:** Hybrid (OOP + FP)
- **Testing Approach:** Behavior-Driven Development
- **Documentation Level:** Standard
- **Error Handling:** Exceptions
- **Naming Convention:** camelCase
- **Comment Style:** JSDoc

## Active User Stories

### ðŸ“‹ Multi-Hop Handoff Chaining

As a user, I want to chain multiple handoff summaries together so that context is preserved across multiple handoff sequences

**Acceptance Criteria:**
- When creating a new handoff from a thread that received a handoff, both summaries are linked
- Chained handoff summaries are presented in chronological order
- The receiving thread can access the full chain of handoff context
- User can view the complete handoff chain history
- Each hop in the chain is clearly identified with its source thread

### ðŸ“‹ Multi-Hop Handoff Chaining

As a user, I want to chain multiple handoff summaries together so that context is preserved across multiple handoff sequences

**Acceptance Criteria:**
- When creating a new handoff from a thread that received a handoff, both summaries are linked
- Chained handoff summaries are presented in chronological order
- The receiving thread can access the full chain of handoff context
- User can view the complete handoff chain history
- Each hop in the chain is clearly identified with its source thread

### ðŸ”„ Sprint Planning Phase with Plan Button

As a user, I want a 'Plan' button available in the sprint view so that I can initiate the planning phase for the selected user stories

**Acceptance Criteria:**
- A 'Plan' button is visible when a sprint is first created
- Clicking 'Plan' triggers a planning prompt to Claude
- The planning request includes context from all selected user stories
- The sprint status changes to 'Planning' while plan is being generated
- User can see the generated plan in the prompt conversation

### ðŸ“‹ Sprint Plan Review and Modification

As a user, I want to review and modify the generated plan through follow-up prompts so that I can refine the implementation approach before starting work

**Acceptance Criteria:**
- User can send follow-up prompts to refine the plan
- Plan modifications are tracked in the conversation history
- User can explicitly approve the plan when satisfied
- Sprint status updates to 'Ready for Implementation' after plan approval
- The final approved plan is associated with the sprint

### ðŸ“‹ Implementation Branch Buttons per User Story

As a user, I want to see implementation branch buttons below each user story header so that I can start focused implementation work on specific areas

**Acceptance Criteria:**
- Each user story header displays branch buttons (UI, Backend, etc.)
- Branch buttons appear after the sprint plan is approved
- Buttons are contextually relevant to the type of work in the story
- Branch buttons are visually associated with their parent user story
- User can identify which story each branch button belongs to

### ðŸ“‹ Start Implementation from Branch Button

As a user, I want to click a branch button to start implementation so that a new turn is added to the current sprint thread with the appropriate context

**Acceptance Criteria:**
- Clicking a branch button adds a new turn to the sprint thread
- The new turn includes context about which story and branch was selected
- The implementation prompt references the approved plan
- The branch type (UI, Backend, etc.) is passed to Claude for context
- The sprint thread continues in the same window

### ðŸ“‹ Sprint State Persistence

As a user, I want the sprint state to persist so that I can return to a sprint and continue work where I left off

**Acceptance Criteria:**
- Sprint data is saved including selected stories, plan, and status
- Reopening a sprint restores the header display with user stories
- Implementation progress per branch is tracked and displayed
- Sprint thread conversation history is preserved
- User can see which branches have been started or completed

### ðŸ“‹ Sprint Progress Tracking per Story

As a user, I want to see the implementation progress for each user story within the sprint so that I know what work remains

**Acceptance Criteria:**
- Each user story header shows implementation status
- Branch buttons indicate whether they have been started
- Completed branches are visually marked as done
- Overall sprint progress is visible
- User can identify blocked or incomplete work at a glance

### ðŸ“‹ Existing Prompt View Compatibility

As a user, I want the existing prompt view to continue working as before so that I can still use free-form prompting without creating a sprint

**Acceptance Criteria:**
- Standard prompt threads work without sprint headers
- User can create new threads without selecting user stories
- Existing prompt functionality is unchanged
- Sprint mode is opt-in through the Backlog selection workflow
- User can distinguish between sprint threads and regular threads

---

## Branch Focus: UI/UX

You are working on the **UI/UX thread**. Focus on:
- User interface implementation
- Component design and structure
- Styling and visual consistency
- User interactions and feedback
- Accessibility and responsiveness

### Color Tokens

Use these CSS custom properties for colors:

| Token | Value | Usage |
|-------|-------|-------|
| `--color-primary` | `#6c63ff` | Main brand color |
| `--color-secondary` | `#16213e` | Secondary accent color |
| `--color-success` | `#48bb78` | Success state color |
| `--color-warning` | `#ecc94b` | Warning state color |
| `--color-error` | `#f56565` | Error state color |
| `--color-neutral` | `#e6e6e6` | Neutral text color |

### Spacing Scale

- **XS:** `0.25rem` - Extra small spacing
- **SM:** `0.5rem` - Small spacing
- **MD:** `0.75rem` - Medium spacing
- **LG:** `1rem` - Large spacing
- **XL:** `1.5rem` - Extra large spacing
- **2XL:** `2rem` - Double extra large spacing

### Border Radii

- **None:** `0`
- **Small:** `4px`
- **Medium:** `8px`
- **Large:** `12px`
- **Full:** `50%`

### Component Patterns

#### Primary Button

Main call-to-action button with primary styling

**Guidelines:** Use for primary actions like "Save", "Submit", "Create". Limit to one per page section.

**HTML Template:**
```html
<button class="btn btn-primary">Button Text</button>
```

**CSS:**
```css
.btn-primary {
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: var(--radius-small);
  padding: var(--spacing-md) var(--spacing-lg);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all 0.15s ease;
}

.btn-primary:hover {
  background: var(--color-primary-dark);
  transform: translateY(-1px);
}
```

### Layout Guidelines

# Layout Guidelines

## Grid System
- Use consistent spacing and grid structure
- Maintain proper visual hierarchy
- Consider responsive design principles

## Alignment
- Align elements consistently
- Use proper margins and padding
- Follow established layout patterns

### Component Guidelines

# Component Guidelines

## Consistency
- Reusable component patterns
- Consistent interaction patterns
- Standard component variants

## States
- Default, hover, focus, disabled states
- Loading and error states
- Active and selected states

### Interaction Guidelines

# Interaction Guidelines

## User Feedback
- Provide clear feedback for user actions
- Use appropriate animations and transitions
- Indicate loading and processing states

## Accessibility
- Keyboard navigation support
- Screen reader compatibility
- Touch-friendly targets for mobile
