## Architectural Layers

```
┌─────────────────────────────────────────────────────────────────┐
│                     Renderer Process                            │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────┐  │
│  │  Components  │  │  SAM Pattern │  │  Plugin Components    │  │
│  │  (UI Views)  │──│  (State Mgmt)│──│  (Designer, Calendar) │  │
│  └──────────────┘  └──────────────┘  └───────────────────────┘  │
└────────────────────────────┬────────────────────────────────────┘
                             │ IPC Bridge (preload.js)
┌────────────────────────────┴────────────────────────────────────┐
│                      Main Process                               │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────┐  │
│  │ IPC Handlers │  │ Puffin State │  │  Plugin Manager       │  │
│  └──────────────┘  └──────────────┘  └───────────────────────┘  │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────┐  │
│  │Claude Service│  │   Database   │  │ Central Reasoning     │  │
│  │  (CLI Spawn) │  │   (SQLite)   │  │ Engine (CRE)          │  │
│  └──────────────┘  └──────────────┘  └───────────────────────┘  │
└────────────────────────────┬────────────────────────────────────┘
                             │ Subprocess
┌────────────────────────────┴────────────────────────────────────┐
│                   External Services                             │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────────────────┐  │
│  │ Claude Code  │  │  h-DSL MCP   │  │  File System          │  │
│  │     CLI      │  │    Server    │  │  (.puffin/ directory) │  │
│  └──────────────┘  └──────────────┘  └───────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```